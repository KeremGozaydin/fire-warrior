(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[31],{29:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/harita",function(){return a(1682)}])},1682:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Harita}});var n=a(5893),r=a(7212),s=a(7357),l=a(913),i=a(3841),c=a(6664),u=a(5819),o=a(5861),d=a(3671),h=a.n(d),f=a(7294),g=a(745),m=a(1954);let getFires=async()=>(await fetch("https://firms.modaps.eosdis.nasa.gov/api/country/csv/3407bc83a7304ea462191a718f8cf6fa/VIIRS_SNPP_NRT/TUR/3/").then(e=>e.text()).then(async e=>await h()().fromString(e))).map(e=>({...e,lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)})),getDistanceFromLatLonInKm=(e,t,a,n)=>{var r=deg2rad(a-e),s=deg2rad(n-t),l=Math.sin(r/2)*Math.sin(r/2)+Math.cos(deg2rad(e))*Math.cos(deg2rad(a))*Math.sin(s/2)*Math.sin(s/2);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))};function deg2rad(e){return e*(Math.PI/180)}let p={mapId:"252ccf18716ea075",zoom:12,center:{lat:41.015137,lng:28.97953}},MyMap=e=>{let{fires:t}=e,[a,r]=(0,f.useState)(),s=(0,f.useRef)(null);return(0,f.useEffect)(()=>{r(new window.google.maps.Map(s.current,p))},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{ref:s,style:{height:"80vh",width:"100%"}}),a&&(0,n.jsx)(Fires,{map:a,fires:t})]})},Fires=e=>{let{map:t,fires:a}=e;return(0,n.jsx)(n.Fragment,{children:a.map((e,a)=>(0,n.jsx)(Marker,{map:t,position:{lat:e.lat,lng:e.lng},children:(0,n.jsx)("div",{children:(0,n.jsx)(m.JO,{style:{width:"100%",height:"100%"},color:"#f30",icon:"mdi:map-marker-alert"})})},a))})},Marker=e=>{let{map:t,children:a,position:n}=e,r=(0,f.useRef)(null),s=(0,f.useRef)(null);(0,f.useEffect)(()=>{if(!s.current){let e=document.createElement("div");s.current=(0,g.createRoot)(e),r.current=new google.maps.marker.AdvancedMarkerView({position:n,content:e})}},[]),(0,f.useEffect)(()=>{s.current.render(a),r.current.position=n,r.current.map=t},[t,n,a]),(0,f.useEffect)(()=>()=>{r.current.setMap(null)},[])};function Harita(){let[e,t]=(0,f.useState)(100),[a,d]=(0,f.useState)({lat:41.015137,lng:28.97953}),[h,g]=(0,f.useState)(),[m,p]=(0,f.useState)([]),[x,w]=(0,f.useState)([]);return(0,f.useEffect)(()=>{getFires().then(e=>{p(e)})},[]),(0,f.useEffect)(()=>{w(m.filter(t=>getDistanceFromLatLonInKm(t.latitude,t.longitude,a.lat,a.lng)<=e))},[m,e,a]),(0,f.useEffect)(()=>{console.log(x)},[x]),(0,n.jsxs)(s.Z,{sx:{height:"100%",display:"flex",flexFlow:"column nowrap",alignItems:"center",justifyContent:"center",gap:"1em"},children:[(0,n.jsxs)(s.Z,{sx:{display:"flex",flexFlow:"row nowrap",alignItems:"center",gap:"2em"},children:[(0,n.jsxs)(l.Z,{sx:{color:"main"},children:[(0,n.jsx)(i.Z,{id:"radius-select-label",children:"Mesafe"}),(0,n.jsxs)(c.Z,{value:e,onChange:e=>{t(e.target.value)},labelId:"radius-select-label",id:"radius-select",label:"Mesafe",color:"success",children:[(0,n.jsx)(u.Z,{value:10,children:"10km"}),(0,n.jsx)(u.Z,{value:100,children:"200km"}),(0,n.jsx)(u.Z,{value:250,children:"300km"}),(0,n.jsx)(u.Z,{value:2500,children:"Full"})]})]}),(0,n.jsx)(o.Z,{children:0==x.length?"Yangın bulunamadı. Filtreleri değiştirmeyi dene!":"".concat(x.length," tane yangın bulundu!")})]}),(0,n.jsx)(r.Wrapper,{apiKey:"AIzaSyBFQTJWw62mxKk8hqHYh6qZh7L5kAqSgs4",version:"beta",libraries:["marker"],children:(0,n.jsx)(MyMap,{fires:x})})]})}}},function(e){e.O(0,[808,964,774,888,179],function(){return e(e.s=29)}),_N_E=e.O()}]);